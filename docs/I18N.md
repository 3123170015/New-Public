# I18N.md — UI Language Support (v4.16.26)

Mục tiêu: thêm hỗ trợ ngôn ngữ giao diện (UI) tối thiểu mà **không phá cấu trúc** và có fallback an toàn.

## Ngôn ngữ hỗ trợ
- `vi` (default)
- `en`
- `zh`
- `id`
- `ms`

## Cơ chế chọn ngôn ngữ
1) **Cookie** `lang` (ưu tiên cao nhất) — do người dùng chọn ở footer hoặc trang thành viên.
2) **Account preference** `User.preferredLanguage` — lưu khi user đăng nhập (API `/api/user/preferences/language`).
3) **Browser header** `Accept-Language` fallback.

## UI components
- **Footer**: Language selector (form POST → `/api/user/preferences/language`).
- **Member settings**: `/u/[id]#language` cho người dùng tự chọn ngôn ngữ.

## Files liên quan
- `lib/i18n.ts`: dictionary + normalize + fallback.
- `app/api/user/preferences/language/route.ts`: persist cookie + user preference.
- `components/settings/LanguageSwitchForm.tsx`: UI select component.
- `components/layout/SiteHeader.tsx`: sample translations (nav labels).
- `components/layout/SiteFooter.tsx`: language select + translated links.
- `app/u/[id]/layout.tsx`: language section for member.

## Lưu ý
- Không dùng dynamic imports phức tạp để tránh breaking changes.
- Nếu cần mở rộng i18n toàn bộ UI, hãy mở rộng dictionary `lib/i18n.ts` và thay thế dần text hard-coded.
